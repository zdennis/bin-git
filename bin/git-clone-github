#!/usr/bin/env ruby

require 'optparse'

VERSION = "1.0.0"
SCRIPT_NAME = File.basename(__FILE__)

def bold(str)
  "\e[1m#{str}\e[0m"
end

def red(str)
  "\e[31m#{str}\e[0m"
end

OptionParser.new do |opts|
  opts.banner = "Usage: #{SCRIPT_NAME} [options] <org/repo>"

  opts.on("-v", "--version", "Show version information") do
    puts "#{SCRIPT_NAME} version #{VERSION}"
    exit 0
  end

  opts.on("-h", "--help", "Prints help message") do
    puts <<~HELP
      #{SCRIPT_NAME} - Clone a GitHub repository

      #{opts}

      Description:
        Clones a GitHub repository using SSH. Takes the project in
        'organization/repository' format.

      Examples:
        #{SCRIPT_NAME} rails/rails
        #{SCRIPT_NAME} ruby/ruby
        #{SCRIPT_NAME} anthropics/anthropic-sdk-python

      Version: #{VERSION}
    HELP
    exit 0
  end
end.parse!

github_project = ARGV.shift

if github_project.nil?
  STDERR.puts red <<~ERROR
    Must provide a github project. See #{SCRIPT_NAME} --help for more information.
  ERROR
  exit 1
end

system "git clone git@github.com:#{github_project}"
